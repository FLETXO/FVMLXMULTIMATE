<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>FXV LXM ULTIMATE</title>
<!-- Font Awesome & Google Fonts -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@500;700&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet" />

<style>
:root {
  --dark-bg: #000000; /* Dark black background */
  --primary-color: #0d1b2a; /* Dark Blue */
  --accent-color: #b22222; /* Dark Red */
  --blue-tone: #1e3d59; /* Deep Blue */
  --light-text: #e0e6f0;
  --neon-cyan: #00f0ff;
  --neon-blue: #00aaff;
  --neon-purple: #a050ff;
  --neon-green: #3aff95;
  --neon-red: #ff4d4d;
  --neon-yellow: #fff000;
  --border-glow: 0 0 15px rgba(0, 255, 255, 0.5);
  --text-glow: 0 0 8px rgba(0,255,255,0.7);
  --transition-speed: 0.3s;
}

/* Reset & Global Styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background: linear-gradient(135deg, var(--dark-bg), var(--primary-color), #0f1a3c);
  color: var(--light-text);
  min-height: 100vh;
  padding: 10px; /* Reduced padding for full page fit */
  font-size: 14px;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden; /* Prevent overflow */
}

/* Join Screen */
#joinScreen {
  background: rgba(0, 0, 0, 0.85);
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
  max-width: 500px;
  width: 90%;
  text-align: center;
  margin-bottom: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
#joinScreen h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 20px;
  margin-bottom: 15px;
  color: var(--neon-cyan);
}
#noticeMessage {
  font-family: 'Rajdhani', sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #ffcc00;
  text-align: center;
  margin-bottom: 15px;
}
#joinButtons {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
}
.join-btn {
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  color: #fff;
  text-align: center;
  transition: background 0.3s;
}
.join-btn.btn1 {
  background: linear-gradient(45deg, #00f0ff, #a050ff);
}
.join-btn.btn1:hover {
  background: linear-gradient(45deg, #a050ff, #00f0ff);
}
.join-btn.btn2 {
  background: linear-gradient(45deg, #00aaff, #ff4d4d);
}
.join-btn.btn2:hover {
  background: linear-gradient(45deg, #ff4d4d, #00aaff);
}
/* New Button Style */
.join-btn.btn3 {
  background: linear-gradient(45deg, #ffcc00, #ff6600);
}
.join-btn.btn3:hover {
  background: linear-gradient(45deg, #ff6600, #ffcc00);
}

/* Main content (login) hidden initially, shown after join */
#loginContainer {
  background: linear-gradient(135deg, #020024, #090979, var(--primary-color));
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 0 25px rgba(0,0,0,0.5);
  width: 90%;
  max-width: 400px;
  display: none; /* Hidden initially */
  flex-direction: column;
  align-items: center;
}
.login-box {
  background: rgba(0,0,0,0.85);
  padding: 20px;
  border-radius: 15px;
  width: 100%;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
  text-align: center;
}
.login-box h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 22px;
  margin-bottom: 15px;
  color: var(--neon-cyan);
  text-shadow: var(--text-glow);
}
#edktKey {
  padding: 12px;
  width: 100%;
  font-size: 14px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.3);
  background: rgba(0,0,0,0.4);
  color: var(--neon-green);
  outline: none;
  margin-bottom: 15px;
}
#edktKey:focus {
  box-shadow: inset 0 0 8px rgba(0,255,255,0.7), 0 0 15px rgba(0,255,255,0.3);
  border-color: rgba(0,255,255,0.5);
}
#loginButton {
  padding: 12px;
  width: 100%;
  font-size: 14px;
  border-radius: 8px;
  border: none;
  background: linear-gradient(45deg, var(--neon-blue), var(--neon-cyan));
  color: #000;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-bottom: 10px;
}
#loginButton:hover:not(:disabled) {
  background: linear-gradient(45deg, var(--neon-cyan), var(--neon-blue));
  transform: translateY(-2px);
  box-shadow: 0 0 15px rgba(0,255,255,0.5);
}
#errorBox {
  color: var(--neon-red);
  font-size: 14px;
  min-height: 1.2em;
}

/* Popup overlay for the join links */
#popupOverlay {
  display: none; /* Hidden initially */
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.6);
  z-index: 100;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
#popupBox {
  background: rgba(0,0,0,0.95);
  padding: 20px;
  border-radius: 15px;
  max-width: 400px;
  width: 90%;
  text-align: center;
}
#popupBox h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 20px;
  margin-bottom: 15px;
  color: #fff;
}
.popup-buttons {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.popup-buttons a {
  padding: 10px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  color: #fff;
  display: block;
  transition: background 0.3s;
}
.btn1 {
  background: linear-gradient(45deg, #00f0ff, #a050ff);
}
.btn1:hover {
  background: linear-gradient(45deg, #a050ff, #00f0ff);
}
.btn2 {
  background: linear-gradient(45deg, #00aaff, #ff4d4d);
}
.btn2:hover {
  background: linear-gradient(45deg, #ff4d4d, #00aaff);
}
/* New Button Style in popup */
.btn3 {
  background: linear-gradient(45deg, #ffcc00, #ff6600);
}
.btn3:hover {
  background: linear-gradient(45deg, #ff6600, #ffcc00);
}
#closePopupBtn {
  margin-top: 15px;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  background: #444;
  color: #fff;
  cursor: pointer;
  font-weight: 600;
}

/* Notice message in high-level English */
#noticeMessage {
  margin-top: 10px;
  font-family: 'Rajdhani', sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #ffcc00;
  text-align: center;
  line-height: 1.4;
}

/* Footer (if needed) */
.footer {
  margin-top: 20px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  color: var(--neon-cyan);
  padding: 10px;
  border-radius: 10px;
  background: rgba(0,0,0,0.3);
}
.footer i {
  margin-right: 8px;
}
</style>
</head>
<body>

<!-- Join Screen (initial) -->
<div id="joinScreen">
  <h2>Commence Your Journey</h2>
  <div id="noticeMessage">
    Kindly join the respective channels before proceeding. Your cooperation is highly appreciated to ensure seamless access and communication.
  </div>
  <div id="joinButtons">
    <a href="https://t.me/+O6wMp0iqWaUzYWE8" target="_blank" class="join-btn btn1" id="joinMain">JOIN MAIN</a>
    <a href="https://t.me/+nebYUxxzSNQzODg1" target="_blank" class="join-btn btn2" id="joinMain2">JOIN MAIN 2</a>
    <!-- New link button -->
    <a href="https://t.me/+Bxil_7G1IbBjM2U9" target="_blank" class="join-btn btn3" id="joinExtra">JOIN EXTRA</a>
  </div>
  <button style="margin-top:15px; padding:12px 24px; border:none; border-radius:8px; background:#444; color:#fff; cursor:pointer; font-weight:600;" id="proceedBtn">Proceed to Login</button>
</div>

<!-- Login UI (hidden initially) -->
<div id="loginContainer">
  <div class="login-box">
    <h2>FXV LXM ULTIMATE</h2>
    <input type="text" id="edktKey" placeholder="ENTER ACCESS KEY" />
    <button id="loginButton" onclick="login()">AUTHENTICATE</button>
    <div class="error" id="errorBox"></div>
  </div>
</div>

<!-- Popup overlay for the join links -->
<div id="popupOverlay">
  <div id="popupBox">
    <h3>Select Your Preferred Join Channel</h3>
    <div class="popup-buttons">
      <a href="https://t.me/+O6wMp0iqWaUzYWE8" target="_blank" class="btn1" id="popupJoinMain">JOIN MAIN</a>
      <a href="https://t.me/+nebYUxxzSNQzODg1" target="_blank" class="btn2" id="popupJoinMain2">JOIN MAIN 2</a>
      <a href="https://t.me/+Bxil_7G1IbBjM2U9" target="_blank" class="btn3" id="popupJoinExtra">JOIN EXTRA</a>
    </div>
    <button id="closePopupBtn" onclick="closePopup()">Close</button>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
  // Firebase configuration (updated with your provided details)
  const firebaseConfig = {
    apiKey: "AIzaSyCpSU98D6wMV1HyS5DpmuaaVzDswbyNrmo",
    authDomain: "fletxofusiondino.firebaseapp.com",
    databaseURL: "https://fletxofusiondino-default-rtdb.firebaseio.com",
    projectId: "fletxofusiondino",
    storageBucket: "fletxofusiondino.appspot.com",
    messagingSenderId: "64276618467",
    appId: "1:64276618467:android:24809ba39db9852fce39d6"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Elements
  const joinScreen = document.getElementById('joinScreen');
  const loginContainer = document.getElementById('loginContainer');
  const errorBox = document.getElementById('errorBox');

  const joinMainLink = document.getElementById('joinMain');
  const joinMain2Link = document.getElementById('joinMain2');
  const joinExtraLink = document.getElementById('joinExtra');

  const joinClicks = { main: false, main2: false, extra: false };

  // Track clicks
  document.getElementById('joinMain').addEventListener('click', () => { joinClicks.main = true; });
  document.getElementById('joinMain2').addEventListener('click', () => { joinClicks.main2 = true; });
  document.getElementById('joinExtra').addEventListener('click', () => { joinClicks.extra = true; });

  // Show login screen
  document.getElementById('proceedBtn').addEventListener('click', () => {
    if (!(joinClicks.main && joinClicks.main2 && joinClicks.extra)) {
      crashPage();
    } else {
      joinScreen.style.display = 'none';
      document.getElementById('loginContainer').style.display = 'flex';
    }
  });

  function crashPage() {
    document.body.innerHTML = "<h1 style='color:red; text-align:center; margin-top:20%; font-family:Arial;'>Critical Error: Unauthorized Access Detected. The system will now terminate.</h1>";
    throw new Error("User did not click all join links");
  }

  function showLogin() {
    joinScreen.style.display = 'none';
    document.getElementById('loginContainer').style.display = 'flex';
  }

  function closePopup() {
    document.getElementById('popupOverlay').style.display = 'none';
  }

  // Login functionality
async function login() {
  const key = document.getElementById('edktKey').value.trim();
  errorBox.innerText = "";
  if (!key) {
    errorBox.innerText = "ACCESS KEY REQUIRED";
    return;
  }
  try {
    const keyRef = db.ref("accessKeys/" + key);
    const snap = await keyRef.once("value");
    if (!snap.exists()) {
      errorBox.innerText = "❌ INVALID KEY";
      return;
    }
    const data = snap.val();
    if (data.expiresAt && Date.now() > data.expiresAt) {
      errorBox.innerText = "❌ KEY EXPIRED";
      return;
    }
    window.location.href = "https://fletxo-fireflame.vercel.app/";
  } catch (e) {
    console.error(e);
    errorBox.innerText = "AUTHENTICATION FAILED";
  }
}
</script>
</body>
</html>